@model IOAS.Models.RCTViewDocumentsModel
<style>
    .modal-dialog {
        width: 95%;
        padding: 15px 15px;
    }

    .modal-body {
        padding: 15px 15px;
    }

    .vw-dts-bg.pd-adj-null {
        padding: 0px !important;
    }

    .faq-section {
        padding: 10px 0px;
        min-height: 400px;
        background: #eee;
        width: 100%;
        display: inline-block;
    }


    .faqs-bg {
        background: #f0f0f0;
        padding: 80px 0px;
    }

    .faqs-acc {
        position: relative;
        margin-bottom: 10px;
    }

        .faqs-acc:last-child {
            margin-bottom: 0;
        }

        .faqs-acc h4::after {
            content: "\f3d8";
            font-family: "Ionicons";
            font-style: normal;
            font-weight: normal;
            position: absolute;
            right: 15px;
            top: 10px;
            font-size: 25px;
            line-height: 30px;
        }

        .faqs-acc h4.collapsed::after {
            content: "\f3d0";
            font-family: "Ionicons";
            font-style: normal;
            font-weight: normal;
            position: absolute;
            right: 15px;
            top: 10px;
            font-size: 25px;
            line-height: 30px;
        }

        .faqs-acc h4 {
            margin-bottom: 1px;
            padding: 15px 30px 15px 15px;
            cursor: pointer;
            background: #fff none repeat scroll 0 0;
            border: 1px solid #f0f0f0;
            border-radius: 4px;
            box-shadow: none;
            margin-top: 0;
            font-size: 15px;
            font-weight: normal;
            box-shadow: 1px 2px 2px rgba(0,0,0,0.2);
            color: #000;
        }

        .faqs-acc p {
            padding: 15px 15px;
            background: #fff none repeat scroll 0 0;
            -moz-transition: all 0.5s ease-in 0s;
            -webkit-transition: all 0.5s ease-in 0s;
            -o-transition: all 0.5s ease-in 0s;
            transition: all 0.5s ease-in 0s;
            border-radius: 4px;
            border: 1px solid #f0f0f0;
            box-shadow: 1px 2px 2px rgba(0,0,0,0.2);
            font-size: 14px;
        }
</style>
<div id="popupViewDoc" class="modal fade" role="dialog" data-backdrop="static" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header brd-bottom">
                <button type="button" class="close" data-dismiss="modal">×</button>
                <h4 class="modal-title">View Document</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-4">
                        <label>Employee Id</label><br>
                        @Model.EmployeeID
                    </div>
                    <div class="col-md-4">
                        <label>Employee Name</label><br>
                        @Model.Name
                    </div>
                    <div class="col-md-4">
                        <label>PI Name</label><br>
                        @Model.PIName
                    </div>
                </div>
                <div class="row mt20">
                    <div class="col-md-12">
                        <div class="bl-lg-panel-box pb-null">
                            <div class="cmn-panel-box">
                                <div class="row  mb20">
                                    @if (Model.OtherDocModel != null)
                                    {
                                        var incr = 0;
                                        var clsdis = "";
                                        foreach (var item in Model.OtherDocModel)
                                        {
                                            if (item.DocumentCatecory == "Other Documents"  || item.DocumentCatecory == "Educational Certificate")  {
                                                clsdis = "dis-none";
                                            }
                                            else  {
                                                clsdis = "";
                                            }
                                            <div class="faqs-acc">
                                                <h4 data-toggle="collapse" data-target="#acc_@incr" aria-expanded="false" class="">@item.DocumentCatecory</h4>
                                                <div id="acc_@incr" class="collapse" aria-expanded="false" style="">
                                                    <table class="table alter-table">
                                                        <thead>
                                                            <tr>
                                                                <th style="width:230px;">Document Name</th>
                                                                <th style="width:180px;" class="@clsdis">Start Date</th>
                                                                <th style="width:180px;" class="@clsdis">End Date </th>
                                                                <th>Attachment</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @foreach (var sublist in item.DocumentList)
                                                            {
                                                                if (sublist.DocumentPath != null)
                                                                {
                                                                    <tr>
                                                                        <td>@item.DocumentCatecory</td>
                                                                        <td class="@clsdis">@sublist.FormDate</td>
                                                                        <td class="@clsdis">@sublist.ToDate</td>
                                                                        <td>
                                                                            @if (!string.IsNullOrEmpty(sublist.DocumentPath))
                                                                            {
                                                                                if (item.DocumentCatecory == "Salary Structure")
                                                                                {
                                                                                    @Html.ActionLink(string.IsNullOrEmpty(sublist.DocumentName) ? "filename" : sublist.DocumentName, "ShowFile", new { Controller = "Requirement", filepath = "~/Content/Requirement/SalaryStructure", file = sublist.DocumentPath }, new { @name = "DocDownload", @target = "_blank" })
                                                                                }
                                                                                else if (item.DocumentCatecory == "NOC Document")
                                                                                {
                                                                                    if (sublist.DocumentPath.Contains(',') && sublist.DocumentName.Contains(','))
                                                                                    {
                                                                                        var docPath = sublist.DocumentPath.Split(',');
                                                                                        var docName = sublist.DocumentName.Split(',');
                                                                                        for (int i = 0; i < docPath.Count(); i++)
                                                                                        {
                                                                                            @Html.ActionLink(docName[i], "ShowDocument", new { Controller = "Account", filepath = "Requirement", file = docPath[i] }, new { @name = "DocDownload", @target = "_blank" })
                                                                                        }
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        @Html.ActionLink(string.IsNullOrEmpty(sublist.DocumentName) ? "filename" : sublist.DocumentName, "ShowDocument", new { Controller = "Account", filepath = "Requirement", file = sublist.DocumentPath }, new { @name = "DocDownload", @target = "_blank" })
                                                                                    }
                                                                                }
                                                                                else
                                                                                {
                                                                                    @Html.ActionLink(string.IsNullOrEmpty(sublist.DocumentName) ? "filename" : sublist.DocumentName, "ShowDocument", new { Controller = "Account", filepath = "Requirement", file = sublist.DocumentPath }, new { @name = "DocDownload", @target = "_blank" })
                                                                                }
                                                                            }                                                                            
                                                                        </td>
                                                                    </tr>
                                                                }
                                                            }
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            incr++;
                                        }
                                    }

                                    @if (Model.DeviationList != null && Model.DeviationList.Count > 0)
                                    {
                                        <div class="faqs-acc">
                                            <h4 data-toggle="collapse" data-target="#acc_Deviation" aria-expanded="false" class="">Deviations</h4>
                                            <div id="acc_Deviation" class="collapse" aria-expanded="false" style="">
                                                <table class="table alter-table">
                                                    <thead>
                                                        <tr>
                                                            <th>SNo</th>
                                                            <th>Deviation</th>
                                                            <th>From</th>
                                                            <th>To</th>
                                                            <th>OrderType</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @if (Model != null)
                                                        {
                                                            foreach (var item in Model.DeviationList)
                                                            {
                                                                <tr>
                                                                    <td>@item.SNo</td>
                                                                    <td>@item.devScenarios</td>
                                                                    <td>@item.FromDate</td>
                                                                    <td>@item.ToDate</td>
                                                                    <td>@item.OrderType</td>
                                                                </tr>
                                                            }
                                                        }
                                                        else
                                                        {
                                                            <tr>
                                                                <td colspan="6">Records unavailable</td>
                                                            </tr>
                                                        }
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer brd-top">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<script>
    $('a[name="DocDownload"]').click(function (p) {
        p.preventDefault();
        var ref = $(this).attr('href');
        var win = window.open('', '_blank');
        win.location.href = ref;
    });
</script>