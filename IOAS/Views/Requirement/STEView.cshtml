@model IOAS.Models.STEViewModel
@using IOAS.GenericServices
@{
    ViewBag.Title = "Short Term Engagement";
    Layout = "~/Views/Shared/_LayoutFluid.cshtml";
    <link href="@Url.Content("~/Content/IOASContent/assets/bootstrap-select/css/bootstrap-select.min.css")" rel="stylesheet" />
    bool isView = Convert.ToBoolean(Request.Params["isView"]);
    string Remark = RequirementService.GetCancelReson(Model.STEId);
}


<div class="row hd-tt-bg">
    <div class="col-md-12">
        <h4><b>Short Term Engagement</b></h4>
        <ul class="nav nav-pills custom-nav-pills custom-spl-nav">
            <li class="active"><a href="javascript:void(0)"><span>01</span>Application Approval</a></li>
        </ul>
    </div>
</div>
<div class="row cust-tab">
    <div class="page-wrapper mt30">
        <div>
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-6">
                        <div class="bl-lg-panel-box pb-null">
                            <div class="cmn-panel-box">
                                <div class="row ">
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group">
                                            @Html.HiddenFor(m => m.ProjectId)
                                            @Html.HiddenFor(m => m.STEId)
                                            @Html.HiddenFor(m => m.Status)
                                            @Html.HiddenFor(m => m.DesignationId)
                                            @Html.HiddenFor(m => m.RoleId)
                                            <label>Application No: </label>
                                            <h4>@Html.DisplayFor(m => m.ApplicationNo)</h4>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group">
                                            <label>Candidate Name: </label>
                                            <h4>@Html.DisplayFor(m => m.Name)</h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group">
                                            <label>PI Name:</label> <br>
                                            <h4>@Html.DisplayFor(m => m.ProjectDetailsModel.PIName)</h4>

                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group">
                                            <label>Department name:</label> <br>
                                            <h4>@Html.DisplayFor(m => m.ProjectDetailsModel.PIDepartmentName)</h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group">
                                            <label>M.S/Ph.D:</label>
                                            <h4>@Html.DisplayFor(m => m.PhdDetail)</h4>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group">
                                            <label>Designation: </label>
                                            <h4>@Html.DisplayFor(m => m.Designation)</h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group">
                                            <label>Qualification: </label>
                                            <h4>@Html.Raw(Model.Qualification)</h4>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group">
                                            <label>Experience: </label>
                                            <h4>@Html.DisplayFor(m => m.Experience)</h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group">
                                            <label>Pay: </label>
                                            <h4>@Html.DisplayFor(m => m.BasicPay)</h4>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group">
                                            <label>Medical:</label> <br>
                                            <h4>@Html.DisplayFor(m => m.MedicalAmmount)</h4>
                                        </div>
                                    </div>
                                </div>

                                <div class="row ">
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group">
                                            <label>DOB </label>
                                            <h4>@Html.DisplayFor(m => m.DateofBirth)</h4>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group  ">
                                            <label>Application Received Date</label>
                                            <h4>@Html.DisplayFor(m => m.ApplicationReceiveDate)</h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="row ">
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group">
                                            <label>Pay category:</label>
                                            @if (Model.ConsolidatedPay)
                                            {
                                                <h4>Consolidated Pay</h4>
                                            }
                                            else
                                            {
                                                <h4>Fellowship Pay</h4>
                                            }
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group ">
                                            <label>IITM Pensioner / CSIR Staff :</label>
                                            <h4>@Html.DisplayFor(m => m.IITMPensionerOrCSIRStaff)</h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group  mb-sm">
                                            <label>Staff category:</label>
                                            <h4>@Html.DisplayFor(m => m.StaffCategory)</h4>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group">
                                            <label>DA Comments</label>
                                            <h4>@Html.DisplayFor(m => m.Comments)</h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    @if (Model.PIJustificationDocuments.Count > 0)
                                    {
                                        <div class="col-md-6">
                                            <div class="form-group custom-form-group">
                                                <label>PI Justification Document</label> <br>
                                                @foreach (var item in Model.PIJustificationDocuments)
                                                {
                                                    <h4>@Html.ActionLink(item.FileName, "ShowDocument", new { Controller = "Account", filepath = "Requirement", file = item.FilePath }, new { @name = "DocDownload", @target = "_blank" })</h4>
                                                }
                                            </div>
                                        </div>
                                    }
                                    @if (Model.PIJustificationCommands.Count > 0)
                                    {
                                        <div class="col-md-6">
                                            <div class="form-group custom-form-group">
                                                <label>PI Comments</label>
                                                @foreach (var picomments in Model.PIJustificationCommands)
                                                {
                                                    <h4>@picomments</h4>
                                                }
                                            </div>
                                        </div>
                                    }
                                </div>
                                <div class="row">
                                    @if (Model.isCommiteeRejection)
                                    {
                                        <div class="col-md-6">
                                            <div class="form-group custom-form-group ">
                                                <label>Committee Comments</label>
                                                <h4>@Html.DisplayFor(m => m.CommitteeRemark)</h4>
                                                <em>@Html.DisplayFor(m => m.CommitteeApprovedBy)</em>
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="bl-lg-panel-box  pb-null">
                            <div class="bl-lg-panel-box-hd mb-m-5 pd-null">
                                <div class="cmn-panel-box">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group custom-form-group mb-sm">
                                                <label>Project Number</label>
                                                <h4>@Html.DisplayFor(m => m.ProjectNumber)</h4>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group custom-form-group mb-sm">
                                                <label>Project Title</label>
                                                <h4>@Html.DisplayFor(m => m.ProjectDetailsModel.ProjectTitle)</h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group custom-form-group mb-sm">
                                                <label>Name of the Client / Sponsoring Agency</label>
                                                <h4>@Html.DisplayFor(m => m.ProjectDetailsModel.SponsoringAgency)</h4>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group custom-form-group mb-sm">
                                                <label>Project Type</label>
                                                <h4>@Html.DisplayFor(m => m.ProjectDetailsModel.ProjectType)</h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group custom-form-group mb-sm">
                                                <label>PI Name</label>
                                                <h4>@Html.DisplayFor(m => m.ProjectDetailsModel.PIName)</h4>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group custom-form-group mb-sm">
                                                <label>Project Start Date</label>
                                                <h4>@Html.DisplayFor(m => m.ProjectDetailsModel.ProjectStartDate)</h4>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group custom-form-group mb-sm">
                                                <label>Project Closure Date</label>
                                                <h4>@Html.DisplayFor(m => m.ProjectDetailsModel.ProjectClosureDate)</h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group custom-form-group mb-sm">
                                                <label>PI Code</label>
                                                <h4>@Html.DisplayFor(m => m.ProjectDetailsModel.PICode)</h4>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group custom-form-group mb-sm">
                                                <label>PI Email ID</label>
                                                <h4>@Html.DisplayFor(m => m.ProjectDetailsModel.Email)</h4>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group custom-form-group mb-sm">
                                                <label>PI Phone No</label>
                                                <h4>@Html.DisplayFor(m => m.ProjectDetailsModel.Phone)</h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group custom-form-group mb-sm">
                                                <label>Department code </label>
                                                <h4>@Html.DisplayFor(m => m.ProjectDetailsModel.PIDepartmentCode)</h4>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group custom-form-group mb-sm">
                                                <label>Department Name</label>
                                                <h4>@Html.DisplayFor(m => m.ProjectDetailsModel.PIDepartmentName)</h4>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group custom-form-group">
                                                <label>Medical</label> <br>
                                                <h4>@Html.DisplayFor(m => m.MedicalINWordings)</h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group custom-form-group">
                                                <label>Designation Code</label>
                                                <h4>@Html.DisplayFor(m => m.DesignationCode)</h4>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group custom-form-group">
                                                <label>Designation</label>
                                                <h4>@Html.DisplayFor(m => m.Designation)</h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group custom-form-group">
                                                <label>Appointment start date</label>
                                                <input type="text" value="@Model.Appointmentstartdate" class="form-control" id="" disabled>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group custom-form-group">
                                                <label>Appointment End date</label>
                                                <input type="text" value="@Model.AppointmentEndDate" class="form-control" id="" disabled>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group custom-form-group">
                                                <label>Commitment Amount</label>
                                                <input type="text" value="@Model.CommitmentAmount" class="form-control" id="" disabled>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group custom-form-group">
                                                <label>Committee member</label>
                                                @Html.TextBoxFor(m => m.CommiteeMember1, new { @class = "form-control", @readonly = "readonly" })
                                                @Html.HiddenFor(m => m.CommiteeMemberId1)
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group custom-form-group">
                                                <label>Committee member</label>
                                                @Html.TextBoxFor(m => m.CommiteeMember2, new { @class = "form-control", @readonly = "readonly" })
                                                @Html.HiddenFor(m => m.CommiteeMemberId2)
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group custom-form-group">
                                                <label> Chairperson</label>
                                                @Html.TextBoxFor(m => m.ChairpersonName, new { @class = "form-control", @readonly = "readonly" })
                                                @Html.HiddenFor(m => m.ChairpersonNameId)
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="text-center" style="margin-bottom: 50px;">
    @Html.HiddenFor(m => m.List_f)
    @if (!string.IsNullOrEmpty(Model.List_f))
    {
        <button type="button" class="btn btn-default" onclick="window.location.href='@Url.Action(Model.List_f,"Requirement")';">Close</button>
    }
    else
    {
        <button type="button" class="btn btn-default" onclick="window.location.href='@Url.Action("Dashboard", "Home")';">Close</button>
    }
</div>

<input type="hidden" id="currentRefId" value="@Model.STEId" />
<input type="hidden" id="processGuideLineId" value="@ViewBag.processGuideLineId" />
<div class="" id="act-now">
    @Html.Partial("_ProcessStatus")
</div>
<script>
    var errMsg = '@TempData["errMsg"]';
    var succMsg = '@TempData["succMsg"]';
    var CommitmentRemark = @Html.Raw(Json.Encode(Remark)) || '';

    $(document).ready(function () {
        if (succMsg != '') {
            $('#alertSuccess').html(succMsg);
            $('#Success').modal('toggle');
        }
        else if (errMsg != '') {
            $('#FailedAlert').html(errMsg);
            $('#Failed').modal('toggle');
        }

        if (CommitmentRemark != '') {
            $.confirm({
                title: 'Cancel reason!',
                content:CommitmentRemark,
                type: 'orange',
                buttons: {
                    Close: function () {
                        //close
                    },
                },
            });
        }

    });

    $('a[name="DocDownload"]').click(function (p) {
        p.preventDefault();
        var ref = $(this).attr('href');
        var win = window.open('', '_blank');
        win.location.href = ref;
    });
</script>
<script src="@Url.Content("~/Content/IOASContent/assets/bootstrap-select/js/bootstrap-select.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/FoolProof/mvcfoolproof.unobtrusive.min.js")" type="text/javascript"></script>